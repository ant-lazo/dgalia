<div class="flex flex-row justify-end">
    <button (click)="onClose()" mat-icon-button color="primary">
        <mat-icon>close</mat-icon>
    </button>
</div>

<div *ngIf="data?.productCode && requestData | async as data">

    <h1 class="text-indigo-900">
        Registrar salida para {{ data[1].name }}
    </h1>

    <div>
        <div class="flex">
            <mat-form-field class="w-full">
                <mat-select [(ngModel)]="rqRegister.headquarter_id" placeholder="Seleccione una sede">
                    <mat-option *ngFor="let hq of data[0]" [value]="hq.id">
                        {{hq.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="grid grid-cols-12 gap-3">
            <div class="col-span-4">
                <mat-form-field class="w-full">
                    <input [(ngModel)]="rqRegister.quantity" matInput type="number" placeholder="Cantidad">
                </mat-form-field>
            </div>
            <div class="col-span-4">
                <mat-form-field class="w-full">
                    <input [(ngModel)]="rqRegister.unit_price" matInput type="number" placeholder="Precio unitario">
                </mat-form-field>
            </div>
            <div class="col-span-4">
                <mat-form-field class="w-full">
                    <input [(ngModel)]="rqRegister.igv" matInput type="number" placeholder="IGV">
                </mat-form-field>
            </div>
        </div>

        <div class="flex">
            <mat-form-field class="w-full">
                <textarea matInput [(ngModel)]="rqRegister.comments" placeholder="Deje su comentario"></textarea>
            </mat-form-field>
        </div>

    </div>

    <div class="flex flex-row justify-end">
        <button (click)="onClose()" mat-stroked-button color="primary" class="mr-2">
            <mat-icon>close</mat-icon>
            Cancelar
        </button>

        <button (click)="onRegister()" mat-flat-button color="primary">
            <mat-icon>save</mat-icon>
            Registrar
        </button>
    </div>

</div>

<ng-template #loading>
    <app-loading-body></app-loading-body>
</ng-template>